<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>FACETRA | Diamonds — Collection</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="description" content="Browse FACETRA's curated diamonds collection — certified round, oval, emerald, princess & fancy color diamonds." />
  <link rel="stylesheet" href="/facetra.in/style.css" />
  <link rel="stylesheet" href="/facetra.in/collection.css" />

  <!-- favicons -->
  <link rel="icon" href="/facetra.in/assets/favicon/favicon-32x32.png" sizes="32x32" type="image/png">
  <link rel="apple-touch-icon" href="/facetra.in/assets/favicon/apple-touch-icon.png">

  <!-- Breadcrumb schema -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"BreadcrumbList",
    "itemListElement":[
      {"@type":"ListItem","position":1,"name":"Home","item":"https://dalviabdulkhalique.github.io/facetra.in/"},
      {"@type":"ListItem","position":2,"name":"Collection","item":"https://dalviabdulkhalique.github.io/facetra.in/collection.html"},
      {"@type":"ListItem","position":3,"name":"Diamonds","item":"https://dalviabdulkhalique.github.io/facetra.in/collection/diamonds.html"}
    ]
  }
  </script>
</head>
<body class="page">

<header class="site-header">
  <div class="header-inner">
    <div class="brand">
      <img src="/facetra.in/logo.png" alt="FACETRA Logo">
      <div>
        <div class="brand-name">FACETRA</div>
        <div class="brand-tag">Gems • Diamonds • Stones</div>
      </div>
    </div>

    <nav class="main-nav">
      <a href="/facetra.in/index.html">Home</a>
      <a href="/facetra.in/collection.html">Collection</a>
      <a href="/facetra.in/certification.html">Certification</a>
      <a href="/facetra.in/why-facetra.html">Why FACETRA</a>
      <a href="/facetra.in/about.html">About</a>
      <a href="/facetra.in/contact.html">Contact</a>
    </nav>

    <div class="nav-toggle" id="navToggle" aria-label="Open menu"><span></span><span></span><span></span></div>
  </div>
</header>

<div class="mobile-nav" id="mobileNav">
  <a href="/facetra.in/index.html">Home</a>
  <a href="/facetra.in/collection.html">Collection</a>
  <a href="/facetra.in/contact.html">Contact</a>
</div>

<main>
  <section class="collection-hero">
    <div class="hero-inner">
      <div class="hero-copy fade-up">
        <h1>Diamonds</h1>
        <p class="lead">Investment-grade, certified diamonds — classical cuts, fancy shapes and rare fancy colors.</p>
      </div>
      <div class="hero-image fade-up" style="text-align:right;">
        <img data-src="/facetra.in/assets/collection/diamonds/diamond-round-brilliant-1.jpg" alt="Diamonds" loading="lazy" style="width:280px; height:auto; border-radius:10px; box-shadow:0 16px 40px rgba(0,0,0,0.6);">
      </div>
    </div>
  </section>

  <section class="container">
    <div class="section-header fade-up">
      <h2>All Diamonds</h2>
      <p>Click any card to view a larger image, detailed info and send an enquiry via WhatsApp.</p>
    </div>

    <div id="diamondsGrid" class="grid fade-up">
      <!-- cards inserted by JS -->
    </div>
  </section>
</main>

<!-- modal (shared with collection page; copy here to be self-contained) -->
<div id="productModal" class="modal" aria-hidden="true">
  <div class="modal-dialog" role="dialog" aria-modal="true">
    <button class="modal-close" id="modalClose" aria-label="Close">&times;</button>
    <div class="modal-body">
      <div class="modal-image">
        <img id="modalImg" alt="" loading="lazy">
      </div>
      <div class="modal-info">
        <h3 id="modalTitle"></h3>
        <p class="meta" id="modalMeta"></p>
        <p id="modalOrigin"></p>
        <p id="modalLongDesc"></p>
        <div class="modal-actions">
          <a href="#" id="whatsappBtn" class="btn-gold" target="_blank" rel="noopener">Enquire via WhatsApp</a>
          <a href="/facetra.in/collection.html" id="backCollection" class="btn-outline">Back to Collection</a>
        </div>
      </div>
    </div>
  </div>
</div>

<footer class="lux-footer">
  <div class="footer-inner">
    <div class="footer-brand">
      <div class="footer-logo"><img src="/facetra.in/logo.png" alt="FACETRA Logo"><span>FACETRA</span></div>
      <p>Premium gemstone trading house specializing in certified natural gemstones.</p>
    </div>
    <div class="footer-links">
      <h4>Quick Links</h4>
      <a href="/facetra.in/index.html">Home</a>
      <a href="/facetra.in/collection.html">Collection</a>
    </div>
    <div class="footer-contact">
      <h4>Contact</h4>
      <a class="contact-item" href="mailto:info@facetra.in">info@facetra.in</a>
      <a class="contact-item" href="tel:+918055113448">+91 80551 13448</a>
    </div>
  </div>
  <div class="footer-bottom">© <span id="year">2026</span> FACETRA. All rights reserved.</div>
</footer>

<script>
/* shared UI helpers */
const toggle = document.getElementById("navToggle");
const mobileNav = document.getElementById("mobileNav");
if (toggle && mobileNav) toggle.onclick = () => mobileNav.classList.toggle("open");

const observer = new IntersectionObserver(entries=>{
  entries.forEach(entry=>{
    if(entry.isIntersecting) entry.target.classList.add("show");
  });
},{threshold:0.12});
document.querySelectorAll(".fade-up").forEach(el=>observer.observe(el));

document.getElementById('year').textContent = new Date().getFullYear();

/* fetch manifest and render diamonds */
(async function loadDiamonds(){
  const manifestPath = '/facetra.in/assets/collection/manifest.json';
  try {
    const resp = await fetch(manifestPath, {cache:'no-store'});
    if (!resp.ok) throw new Error('Failed to load manifest');
    const manifest = await resp.json();
    const diamonds = manifest.diamonds || [];
    const grid = document.getElementById('diamondsGrid');

    if (!grid) return;

    diamonds.forEach(item => {
      const card = document.createElement('article');
      card.className = 'collection-card';
      card.innerHTML = `
        <div class="card-preview">
          <img data-src="/facetra.in/${item.img}" alt="${escapeHtml(item.title)}" loading="lazy">
        </div>
        <div class="card-body">
          <h4>${escapeHtml(item.title)}</h4>
          <p>${escapeHtml(item.desc || '')}</p>
          <div style="display:flex; gap:8px; margin-top:10px;">
            <button class="btn-outline previewBtn" data-slug="${item.slug}">Preview</button>
            <a class="btn-outline" href="/facetra.in/collection/diamonds.html#${item.slug}" aria-label="Open item link">Permalink</a>
          </div>
        </div>
      `;
      // attach dataset for modal convenience
      card.querySelector('.previewBtn').dataset.item = JSON.stringify(item);
      grid.appendChild(card);
    });

    // lazy-load observer
    const imgObserver = new IntersectionObserver((entries, obs)=>{
      entries.forEach(e=>{
        if (e.isIntersecting){
          const img = e.target;
          const ds = img.dataset.src;
          if (ds) { img.src = ds; img.removeAttribute('data-src'); }
          obs.unobserve(img);
        }
      });
    }, {rootMargin: '120px'});
    document.querySelectorAll('img[data-src]').forEach(i => imgObserver.observe(i));

    // attach modal preview handlers
    delegatePreviewButtons();
  } catch (err) {
    console.error(err);
  }
})();

/* modal logic */
function delegatePreviewButtons(){
  document.body.addEventListener('click', function(evt){
    const btn = evt.target.closest('.previewBtn');
    if (!btn) return;
    const item = JSON.parse(btn.dataset.item || '{}');
    openModalWithItem(item);
  });
}

const modal = document.getElementById('productModal');
const modalClose = document.getElementById('modalClose');
const modalImg = document.getElementById('modalImg');
const modalTitle = document.getElementById('modalTitle');
const modalMeta = document.getElementById('modalMeta');
const modalOrigin = document.getElementById('modalOrigin');
const modalLongDesc = document.getElementById('modalLongDesc');
const whatsappBtn = document.getElementById('whatsappBtn');

function openModalWithItem(item){
  if(!item) return;
  // set image src (use absolute root path)
  modalImg.src = '/facetra.in/' + item.img;
  modalImg.alt = item.title || 'Product image';
  modalTitle.innerHTML = escapeHtml(item.title || '');
  modalMeta.textContent = `${item.cut || ''} • ${item.variety || ''} • ${item.color || ''}`;
  modalOrigin.textContent = `Origin: ${item.origin || 'Unknown'}`;
  modalLongDesc.textContent = item.longDesc || item.desc || '';

  // WhatsApp link with encoded message:
  const baseUrl = `https://wa.me/918055113448`;
  const productPage = window.location.origin + '/facetra.in/collection/diamonds.html?product=' + encodeURIComponent(item.slug);
  const message = `Hello FACETRA, I am interested in ${item.title} Link: ${productPage}`;
  whatsappBtn.href = baseUrl + '?text=' + encodeURIComponent(message);

  // Inject Product JSON-LD (replace previous if any)
  const prev = document.getElementById('product-jsonld');
  if (prev) prev.remove();
  const productSchema = {
    "@context": "https://schema.org",
    "@type": "Product",
    "name": item.title,
    "image": [window.location.origin + '/facetra.in/' + item.img],
    "description": item.longDesc || item.desc || '',
    "sku": item.slug || '',
    "brand": { "@type": "Brand", "name": "FACETRA" }
  };
  const script = document.createElement('script');
  script.type = 'application/ld+json';
  script.id = 'product-jsonld';
  script.text = JSON.stringify(productSchema);
  document.head.appendChild(script);

  modal.classList.add('show');
  modal.setAttribute('aria-hidden', 'false');
  // close handlers
  modalClose && modalClose.addEventListener('click', closeModal);
  document.addEventListener('keydown', escClose);
  modal.addEventListener('click', overlayClose);
}

function closeModal(){
  modal.classList.remove('show');
  modal.setAttribute('aria-hidden', 'true');
  // cleanup schema
  const prev = document.getElementById('product-jsonld');
  if (prev) prev.remove();
  // remove event listeners
  document.removeEventListener('keydown', escClose);
  modal.removeEventListener('click', overlayClose);
}

function escClose(e){
  if (e.key === 'Escape') closeModal();
}

function overlayClose(e){
  if (e.target === modal) closeModal();
}

/* small utility to escape HTML text inserted into innerHTML */
function escapeHtml(unsafe) {
  if (unsafe === null || unsafe === undefined) return '';
  return String(unsafe).replace(/[&<>"'`=\/]/g, function (s) {
    return ({
      '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;','/':'&#x2F;','`':'&#x60;','=':'&#x3D;'
    })[s];
  });
}
</script>

</body>
</html>
