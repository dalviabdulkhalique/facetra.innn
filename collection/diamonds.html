<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Diamond Collection | FACETRA</title>

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Explore FACETRAâ€™s certified natural diamond collection including round, oval, emerald, radiant, pear and fancy color diamonds.">

<link rel="icon" href="../assets/favicon/favicon-32x32.png">
<link rel="apple-touch-icon" href="../assets/favicon/apple-touch-icon.png">

<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@500;600&family=Inter:wght@300;400&display=swap" rel="stylesheet">

<link rel="stylesheet" href="../style.css">
<link rel="stylesheet" href="../collection.css">

</head>
<body>

<!-- ================= HERO ================= -->

<section class="collection-hero">
  <div class="hero-inner-wrap">
    <h1 class="hero-title">DIAMOND COLLECTION</h1>
    <p class="hero-description">
      Certified natural diamonds curated for collectors and fine jewellery.
    </p>
  </div>
</section>

<!-- ================= GRID ================= -->

<section class="collection-section">
  <div class="collection-grid" id="diamondGrid"></div>
</section>

<!-- ================= MODAL ================= -->

<div class="modal-overlay" id="gemModal">
  <div class="modal-box">

    <img id="modalImg">

    <div class="modal-content">
      <h2 id="modalTitle"></h2>

      <div class="modal-fields" id="modalFields"></div>

      <p class="modal-desc" id="modalDesc"></p>

      <div class="modal-actions">
        <a id="whatsappBtn" class="whatsapp-btn" target="_blank">WhatsApp Enquiry</a>
        <button class="close-btn" id="modalClose">Close</button>
      </div>
    </div>

  </div>
</div>

<!-- ================= JS ================= -->

<script>

let manifestData=null;

fetch("../assets/collection/manifest.json",{cache:"no-store"})
.then(r=>r.json())
.then(data=>{
  manifestData=data;
  buildGrid(data.diamonds);
});

function buildGrid(list){
  const grid=document.getElementById("diamondGrid");
  grid.innerHTML="";

  list.forEach(item=>{
    const card=document.createElement("div");
    card.className="gem-card";

    card.innerHTML=`
      <img src="../${item.img}" alt="${item.title}">
      <h3>${item.title}</h3>
      <p>${item.desc}</p>
      <button class="view-btn" data-slug="${item.slug}">View Details</button>
    `;

    grid.appendChild(card);
  });
}

/* CLICK */

document.addEventListener("click",function(e){
  const btn=e.target.closest(".view-btn");
  if(!btn) return;

  const slug=btn.dataset.slug;
  openModal(slug);
});

/* MODAL */

const gemModal=document.getElementById("gemModal");
const modalImg=document.getElementById("modalImg");
const modalTitle=document.getElementById("modalTitle");
const modalFields=document.getElementById("modalFields");
const modalDesc=document.getElementById("modalDesc");
const whatsappBtn=document.getElementById("whatsappBtn");
const modalClose=document.getElementById("modalClose");

function openModal(slug){

  const item=manifestData.diamonds.find(d=>d.slug===slug);
  if(!item) return;

  modalImg.src="../"+item.img;
  modalTitle.textContent=item.title;

  modalFields.innerHTML=`
    <div>Cut: ${item.cut || "Brilliant"}</div>
    <div>Shape: ${item.shape || "Natural"}</div>
    <div>Variety: ${item.variety || "Colorless Diamond"}</div>
    <div>Origin: Natural</div>
  `;

  modalDesc.textContent =
    "This certified natural diamond is selected for brilliance, symmetry and durability, making it suitable for fine jewellery and long-term gemstone investment.";

  const link = location.origin + location.pathname + "#" + item.slug;

  const msg =
    `Hi Facetra,%0AEnquiry for ${item.title}%0A${link}`;

  whatsappBtn.href =
    "https://wa.me/918055113448?text=" + msg;

  gemModal.classList.add("active");
}

/* CLOSE */

modalClose.onclick=()=>gemModal.classList.remove("active");

gemModal.onclick=e=>{
  if(e.target===gemModal) gemModal.classList.remove("active");
};

</script>

</body>
</html>
